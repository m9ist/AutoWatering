Пины на нижней плате: 22-38d 0-7a

Протокол общения ардуино и ESP:
- поздороваться и набор флагов синхронизации
- синхронизация времени
- от ESP - обновить настройки растений
- к ESP - послать стейт, чтобы рисовать юзверу и посылать в iot
- от ESP залогировать сообщение
- к ESP послать ошибку пользователю

[o] Частота проверки влажности почвы
[o] Частота отправки данных в iot
Время последней проверки
Время последней синхронизации часов
Время формирования страницы
Список критических ошибок

plant i
- включено ли растение
- [o] описание растения (название, горшок и тд)
- [o] частота полива в часах
- [o] время следующего полива (так можно менять начальную дату)
- [o] допустимая частота в часах принудительного полива
- время последней поливки
- размер последней поливки мл
- [o] нижний баунд поливки (нижняя граница допустимого диапазона)
- [o] баунд только политой почвы (верхняя граница диапазона)
- [o] баунд политой почвы через час (верхняя допустимая граница диапазона)
- [o] базовый размер поливки мл
- показания влажности почвы за неделю раз в час (график?) + подпись размер полива


Алгоритм:
- если сразу после поливки влажность не увеличивается, запускать ошибку и отключать растение? оповещение пользователя?
- после поливки делать замеры чаще
- если влажность ниже баунда - запускается принудительная проливка на 1/4 от стандартного
- разобраться с тайм аутом принудительной поливки и кол-ва таких решений в сутки
- проливает размер последней поливки (изначально базовый)
- если через час баунд политой почвы выше - уменьшение объема поливки на 1/10, если ниже 1/10 от диапазона - добавить на 1/10

Оповещения:
- сработала авто поливка нижнего баунда
- 1/4 до нижнего баунда
- тяжелая ошибка приложения
-- после поливки влажность не изменилась
-- нет датчика влажности у включенного растения
-- нет воды или при включении помпы вода не течет


Экран:
- нажата кнопка
- красным показывать "не все хорошо"


Пищалка

Кнопка внеочередной проверки датчиков

Кнопка режима экрана
Кнопка вверх
Кнопка вниз
- если нажата кнопка сбрасывать оповещение

Датчик реального времени
- алгоритм синхронизации с инетом
- алгоритм синхронизации ардуино-есп
- алгоритм получения времени для логирования (это мгновенно?)

Система логирования
- как запоминать последние n логов для отображения на экране или есп

Тумблер включения растения

Тумблер включения помпы

Кнопка принудительного полива растения
- если нажимается кнопка, но отключено - красненьким и сообщение

Датчики влажности почвы
- надо ли считывать при отключенном растении

Помпа + датчик расхода воды
- посчитать производительность без клапанов - понимание "прорыва" + ошибка
- посчтать производительность через клапан в секунду - понимание "что-то не так с клапаном"
- настроить коэффициенты подсчета протекаемой воды в финальной системе

Датчик уровня воды